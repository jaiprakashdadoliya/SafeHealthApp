(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{1976:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsentFormsSave=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=f(n(1)),a=n(43),c=n(36),i=(f(n(115)),n(10),n(54)),l=n(1977),u=n(2716),d=n(8);function f(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.handleSubmit=o.handleSubmit.bind(o),o.handleChange=o.handleChange.bind(o),o.handleClose=o.handleClose.bind(o),o.state=o.initialState,o.pdfPath="doctor/consentForm/generatePdf/",o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),s(t,[{key:"componentDidUpdate",value:function(){var e=this.props.dispatch;this.props.isUserNotValid&&e(i.headerActions.logout())}},{key:"handleSubmit",value:function(){if(u.consentFormsValidator.isConsentFormValid(this)){var e=this.state.consentForm.detail;(0,this.props.dispatch)(l.consentFormsActions.consentFormSave(e,this.props.consentForms))}}},{key:"handleClose",value:function(){(0,this.props.dispatch)(l.consentFormsActions.resetState()),this.props.consentFormsSaveHideHandle(),this.setState(this.initialState)}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,s=t.value,r=this.state.consentForm,a=r.detail,c=r.validate;this.setState({consentForm:{validate:o({},c,m({},n,{isValid:!0,message:""})),detail:o({},a,m({},n,s))}})}},{key:"componentWillReceiveProps",value:function(e){var t={};if(e.updatedData?t=e.updatedData:e.consentFormData&&(t=e.consentFormData),t.consent_form_id&&!e.sendingRequest)for(var n in t)this.state.consentForm.detail[n]=null!=t[n]?String(t[n]):"";else this.setState(this.initialState);e.successMessage&&setTimeout(function(){this.handleClose()}.bind(this),1500)}},{key:"render",value:function(){return r.default.createElement("div",null,r.default.createElement(a.Modal,{show:this.props.consentFormsSaveShow,onHide:this.handleClose},r.default.createElement(a.Modal.Header,{closeButton:!0},r.default.createElement(a.Modal.Title,null,this.props.title)),this.props.successMessage&&r.default.createElement(a.Alert,{bsStyle:"success"},this.props.successMessage),this.props.errorMsg&&r.default.createElement(a.Alert,{bsStyle:"danger"},this.props.errorMsg),r.default.createElement(a.Modal.Body,null,r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-12"},r.default.createElement("div",{className:this.state.consentForm.validate.consent_form_title.isValid?"form-group":"form-group has-error"},r.default.createElement("input",{className:"form-control",type:"text",name:"consent_form_title",id:"consent_form_title",onChange:this.handleChange,value:this.state.consentForm.detail.consent_form_title}),r.default.createElement("label",{className:"control-label"},"Form Title"),r.default.createElement("span",{className:"help-block"},this.state.consentForm.validate.consent_form_title.message))),r.default.createElement("div",{className:"col-md-12"},r.default.createElement("div",{className:this.state.consentForm.validate.consent_form_content.isValid?"form-group":"form-group has-error"},r.default.createElement("textarea",{className:"form-control",value:this.state.consentForm.detail.consent_form_content,name:"consent_form_content",onChange:this.handleChange,rows:"20"}),r.default.createElement("label",{className:"control-label"},"Content"),r.default.createElement("span",{className:"help-block"},this.state.consentForm.validate.consent_form_content.message))))),r.default.createElement(a.Modal.Footer,null,r.default.createElement("a",{href:d.configConstants.API_BASE_PATH+this.pdfPath+this.state.consentForm.detail.consent_form_id,className:"btn text-btn green float-left",target:"_blank"},"Generate PDF"),r.default.createElement(a.Button,{className:"btn text-btn red",onClick:this.handleClose},"Close"),r.default.createElement(a.Button,{className:"btn text-btn green",onClick:this.handleSubmit,disabled:!!this.props.successMessage},"Save"))))}},{key:"initialState",get:function(){return{consentForm:{detail:{consent_form_id:"",consent_form_title:"",consent_form_content:d.dataConstants.CONSENT_FORMS_DEFAULT_CONTENT},validate:{consent_form_title:{isValid:!0,message:""},consent_form_content:{isValid:!0,message:""}}}}}}]),t}();var h=(0,c.connect)(function(e){var t=e.consentForms;return{isUserNotValid:t.isUserNotValid,sendingRequest:t.sendingRequest,successMessage:t.successMessage,updatedData:t.updatedData,errorMsg:t.errorMsg}})(p);t.ConsentFormsSave=h},1977:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.consentFormsActions=void 0;var o=n(8),s=n(343),r=n(2715),a=n(10);t.consentFormsActions={consentFormList:function(){return function(t){t({type:s.consentFormsConstants.DR_CF_REQUEST}),r.consentFormsService.consentFormList().then(function(n){var r,a,c=n.data;c.code==o.configConstants.SUCCESS_CODE?t((a=c.result,{type:s.consentFormsConstants.DR_CF_SUCCESS,consentForms:a})):c.code==o.configConstants.ERROR_CODE?t(e(c.message)):c.code==o.configConstants.EXCEPTION_CODE?t(e(c.message)):c.code==o.configConstants.UNAUTHENTICATE_CODE?t((r=c.message,{type:o.configConstants.UNAUTHENTICATE,error:r})):t(e(n))}).catch(function(n){t(e(n))})};function e(e){return{type:s.consentFormsConstants.DR_CF_FAILURE,errorMsg:e}}},consentFormSave:function(e,t){return function(c){c({type:s.consentFormsConstants.DR_CF_ADD_REQUEST}),r.consentFormsService.consentFormSave(e).then(function(r){var i,l=r.data;if(l.code==o.configConstants.SUCCESS_CODE){if(""!=e.consent_form_id){var u=t.findIndex(function(t){return t.consent_form_id===e.consent_form_id});t[u]=e}else e.consent_form_id=l.result.consent_form_id,t.push(e);var d={message:l.message,detail:l.result,consentForm:t};c(function(e){return{type:s.consentFormsConstants.DR_CF_ADD_SUCCESS,successMsg:e}}(d))}else if(l.code==o.configConstants.ERROR_CODE){var f=a.utilityHelper.getFirstErrorMessage(l.error);c(n(f))}else l.code==o.configConstants.EXCEPTION_CODE?c(n(l.message)):l.code==o.configConstants.UNAUTHENTICATE_CODE?c((i=l.message,{type:o.configConstants.UNAUTHENTICATE,error:i})):c(n(r))}).catch(function(e){c(n(e))})};function n(e){return{type:s.consentFormsConstants.DR_CF_ADD_FAILURE,errorMsg:e}}},consentFormDelete:function(e,t){return function(a){a({type:s.consentFormsConstants.DR_CF_REMOVE_REQUEST}),r.consentFormsService.consentFormDelete(e).then(function(r){var c,i=r.data;if(i.code==o.configConstants.SUCCESS_CODE){t=t.filter(function(t){return t.consent_form_id!==e});var l={message:i.message,consentFormId:e,consentForm:t};a(function(e){return{type:s.consentFormsConstants.DR_CF_REMOVE_SUCCESS,successMsg:e}}(l))}else i.code==o.configConstants.ERROR_CODE?a(n(i.message)):i.code==o.configConstants.EXCEPTION_CODE?a(n(i.message)):i.code==o.configConstants.UNAUTHENTICATE_CODE?a((c=i.message,{type:o.configConstants.UNAUTHENTICATE,error:c})):a(n(r))}).catch(function(e){a(n(e))})};function n(e){return{type:s.consentFormsConstants.DR_CF_REMOVE_FAILURE,errorMsg:e}}},resetState:function(){return function(e){e({type:s.consentFormsConstants.DR_CF_RESET_STATE})}}}},2713:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2714);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var s=n(1976);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})})},2714:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsentForms=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=d(n(1)),a=n(43),c=n(36),i=n(803);d(n(807));n(804);d(n(115));var l=n(1976),u=(n(8),n(1977));function d(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return o.consentFormsSaveShowHandle=o.consentFormsSaveShowHandle.bind(o),o.consentFormsSaveHideHandle=o.consentFormsSaveHideHandle.bind(o),o.consentFormDeleteHandle=o.consentFormDeleteHandle.bind(o),o.consentFormSearch=o.consentFormSearch.bind(o),o.state={consentFormsSaveShow:!1,consentForm:o.initialState,title:"Add Consent Form"},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),s(t,[{key:"consentFormsSaveShowHandle",value:function(e){if(e){var t=this.state.consentForm,n=t.detail,s=t.validate;this.setState({consentForm:{detail:o({},n,{consent_form_id:e.consent_form_id,consent_form_title:e.consent_form_title,consent_form_content:e.consent_form_content}),validate:o({},s,{consent_form_title:{isValid:!0,message:""},consent_form_content:{isValid:!0,message:""}})},title:"Edit Consent Form"})}else this.setState({consentForm:this.initialState});this.setState({consentFormsSaveShow:!0})}},{key:"componentWillMount",value:function(){(0,this.props.dispatch)(u.consentFormsActions.consentFormList())}},{key:"componentWillReceiveProps",value:function(e){(e.successMessage||e.deleteErrorMsg)&&e.activeKey?(this.setState({}),setTimeout(function(){this.setState({consentForm:this.initialState}),(0,this.props.dispatch)(u.consentFormsActions.resetState())}.bind(this),500)):e.errorMsg&&e.activeKey&&setTimeout(function(){(0,this.props.dispatch)(u.consentFormsActions.resetState())}.bind(this),500)}},{key:"consentFormsSaveHideHandle",value:function(){this.setState({consentFormsSaveShow:!1})}},{key:"consentFormDeleteHandle",value:function(e){var t=this;(0,i.confirmAlert)({title:"ConsentForm delete",message:"Are you sure you want to delete this consentForm?",buttons:[{label:"Yes",onClick:function(){(0,t.props.dispatch)(u.consentFormsActions.consentFormDelete(e,t.props.consentForms))}},{label:"No",onClick:function(){return!1}}]})}},{key:"consentFormSearch",value:function(e){var t=e.target.value,n=[{id:"all",value:t}];this.setState({filterAll:t,filtered:n})}},{key:"render",value:function(){var e=this;return r.default.createElement("div",null,this.state.deleteSuccessMessage&&r.default.createElement(a.Alert,{bsStyle:"success"},this.props.deleteSuccessMessage),this.state.deleteErrorMsg&&r.default.createElement(a.Alert,{bsStyle:"danger"},this.props.deleteErrorMsg),r.default.createElement(l.ConsentFormsSave,{consentFormsSaveShow:this.state.consentFormsSaveShow,consentFormsSaveHideHandle:this.consentFormsSaveHideHandle,consentFormData:this.state.consentForm.detail,consentForms:this.props.consentForms,title:this.state.title}),r.default.createElement("div",{className:"col-md-12"},r.default.createElement("h4",null,"Consent Forms")),r.default.createElement("div",{className:"col-md-12 text-left"},this.props.loader?r.default.createElement("h4",{className:"Loader text-center text-success"},"Loading..."):null,this.props.consentForms&&this.props.consentForms.length>0&&this.props.consentForms.map(function(t,n){return r.default.createElement("div",{className:"col-md-2",key:n},r.default.createElement("button",{className:"green btn table-btn",id:"dr_pass_change",onClick:e.consentFormsSaveShowHandle.bind(null,t)},t.consent_form_title))}),r.default.createElement("div",{className:"col-md-2"},r.default.createElement("button",{className:"green btn table-btn",id:"dr_pass_change",onClick:this.consentFormsSaveShowHandle.bind(null,void 0),disabled:!!this.props.successMessage},"+"))))}},{key:"initialState",get:function(){return{detail:{consent_form_id:"",consent_form_title:"",consent_form_content:""},validate:{consent_form_title:{isValid:!0,message:""},consent_form_content:{isValid:!0,message:""}}}}}]),t}();var m=(0,c.connect)(function(e){var t=e.consentForms,n=t.pages,o=t.isUserNotValid,s=t.consentForms,r=t.successMessage,a=t.deleteErrorMsg,c=t.errorMsg;return{pages:n,isUserNotValid:o,consentForms:s,successMessage:r,deleteSuccessMessage:t.deleteSuccessMessage,deleteErrorMsg:a,errorMsg:c,loader:t.loader}})(f);t.ConsentForms=m},2715:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.consentFormsService=void 0;var o,s=n(15),r=(o=s)&&o.__esModule?o:{default:o},a=n(8),c=n(10);t.consentFormsService={consentFormList:function(){return(0,r.default)({method:"get",url:a.configConstants.API_BASE_PATH+"doctor/consentForm/list",data:{},headers:{Authorization:"Bearer "+c.utilityHelper.getLoginAccessToken()}}).then(function(e){return e}).catch(function(e){return e})},consentFormSave:function(e){var t=""!=e.consent_form_id?"put":"post";return(0,r.default)({method:t,url:a.configConstants.API_BASE_PATH+"doctor/consentForm/save",data:e,headers:{"Content-Type":"application/json",Authorization:"Bearer "+c.utilityHelper.getLoginAccessToken()}}).then(function(e){return e}).catch(function(e){return e})},consentFormDelete:function(e){var t={consent_form_id:e};return(0,r.default)({method:"delete",url:a.configConstants.API_BASE_PATH+"doctor/consentForm/delete",headers:c.headerHelper.getHeaderWithAuthorization(),data:c.headerHelper.appendUserDataInJson(t)}).then(function(e){return e}).catch(function(e){return e})}}},2716:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.consentFormsValidator=void 0;var o,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=n(19),a=(o=r)&&o.__esModule?o:{default:o},c=n(10);t.consentFormsValidator={isConsentFormValid:function(e){var t=e.state.consentForm,n=t.detail,o=t.validate,r={};a.default.isEmpty(a.default.trim(n.consent_form_title))&&(r.consent_form_title={isValid:!1,message:"Form title is required."});a.default.isEmpty(a.default.trim(n.consent_form_content))&&(r.consent_form_content={isValid:!1,message:"Form content is required."});return!!c.utilityHelper.isObjectEmpty(r)||(e.setState({consentForm:{detail:s({},n),validate:s({},o,r)}}),!1)}}},803:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,s,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();t.confirmAlert=function(e){(function(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"feGaussianBlur");t.setAttribute("stdDeviation","0.7");var n=document.createElementNS(e,"filter");n.setAttribute("id","gaussian-blur"),n.appendChild(t);var o=document.createElementNS(e,"svg");o.setAttribute("id","react-confirm-alert-firm-svg"),o.setAttribute("class","react-confirm-alert-svg"),o.appendChild(n),document.body.appendChild(o)})(),function(e){document.body.children[0].classList.add("react-confirm-alert-blur");var t=document.createElement("div");t.id="react-confirm-alert",document.body.appendChild(t),(0,l.render)(c.default.createElement(f,e),t)}(e)};var a=n(1),c=u(a),i=u(n(0)),l=n(13);function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=(s=o=function(e){function t(){var e,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,r=Array(s),a=0;a<s;a++)r[a]=arguments[a];return n=o=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),o.handleClickButton=function(e){e.onClick&&e.onClick(),o.close()},o.close=function(){var e,t;e=document.getElementById("react-confirm-alert"),(0,l.unmountComponentAtNode)(e),e.parentNode.removeChild(e),(t=document.getElementById("react-confirm-alert-firm-svg")).parentNode.removeChild(t),document.body.children[0].classList.remove("react-confirm-alert-blur")},o.componentWillUnmount=function(){o.props.willUnmount()},o.renderCustomUI=function(){var e=o.props,t=e.title,n=e.message;return(0,e.customUI)({title:t,message:n,onClose:o.close})},d(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.title,o=t.message,s=t.buttons,r=t.childrenElement,a=t.customUI;return c.default.createElement("div",{className:"react-confirm-alert-overlay"},c.default.createElement("div",{className:"react-confirm-alert"},a?this.renderCustomUI():c.default.createElement("div",{className:"react-confirm-alert-body"},n&&c.default.createElement("h1",null,n),o,r(),c.default.createElement("div",{className:"react-confirm-alert-button-group"},s.map(function(t,n){return c.default.createElement("button",{key:n,onClick:function(){return e.handleClickButton(t)}},t.label)})))))}}]),t}(),o.propTypes={title:i.default.string,message:i.default.string,buttons:i.default.array.isRequired,childrenElement:i.default.func,customUI:i.default.func,willUnmount:i.default.func},o.defaultProps={buttons:[{label:"Cancel",onClick:function(){return null}},{label:"Confirm",onClick:function(){return null}}],childrenElement:function(){return null},willUnmount:function(){return null}},s);t.default=f},804:function(e,t,n){}}]);