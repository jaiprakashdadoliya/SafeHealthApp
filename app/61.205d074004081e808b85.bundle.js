(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{1960:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NextVisitSchedule=void 0;var n=c(i(1)),s=(i(43),c(i(115)),i(10)),o=i(802),a=i(66),r=i(8);c(i(298)),c(i(9));function c(e){return e&&e.__esModule?e:{default:e}}i(297);t.NextVisitSchedule=function(e){return n.default.createElement("div",null,n.default.createElement("h3",{className:"equal-margin"},"Next Visit Schedule"),n.default.createElement("div",{className:"col-md-12",id:"next-visit-top"},n.default.createElement(a.PatientAlertMessage,{errorMsg:e.errorMsg,isUpdateDone:e.isInsertDone,successMessage:e.successMsg})),e.user_type==r.configConstants.USER_TYPE_DOCTOR&&n.default.createElement("div",{className:"row"},n.default.createElement("div",{className:"col-md-10"},n.default.createElement(o.FxForm,{config:e.formConfig,ref:function(t){e.handleBoundFormUpdate(t)}})),n.default.createElement("div",{className:"col-md-2 margin-top-25"},n.default.createElement("button",{onClick:e.submitNextVisitSchedule,disabled:!(!e.submitted||e.errorMessage||e.successMsg),className:"btn text-btn green"},!e.submitted||e.errorMessage||e.successMsg?"Save":"Sending..")),n.default.createElement("div",{className:"col-md-10"},Object.keys(e.nextVisitSchedule).length>0&&n.default.createElement("div",{className:"col-md-12"},"Your next booking schedule is ",n.default.createElement("strong",null,s.utilityHelper.changeDateFormat(e.nextVisitSchedule.booking_date),", ",s.utilityHelper.changeTimingFormat(e.nextVisitSchedule.booking_time))))),e.user_type==r.configConstants.USER_TYPE_PATIENT&&n.default.createElement("div",{className:"col-md-10"},Object.keys(e.nextVisitSchedule).length>0?n.default.createElement("div",{className:"col-md-12"},"Your next booking schedule is ",n.default.createElement("strong",null,s.utilityHelper.changeDateFormat(e.nextVisitSchedule.booking_date),", ",s.utilityHelper.changeTimingFormat(e.nextVisitSchedule.booking_time))):n.default.createElement("div",null,"Next booking not booked ")))}},2675:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1960);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var s=i(2676);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})})},2676:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NextVisitScheduleContainer=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=f(i(1)),a=f(i(2677)),r=i(36),c=(i(116),i(10)),l=i(8),u=f(i(9)),d=i(1960),p=i(1086),m=i(852);function f(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.defaultState={formConfig:a.default},i.state=i.defaultState,i.boundForm=void 0,i.clinic_id="",i.submitNextVisitSchedule=i.submitNextVisitSchedule.bind(i),i.handleBoundFormUpdate=i.handleBoundFormUpdate.bind(i),i.getAppointmentTimeByDate=i.getAppointmentTimeByDate.bind(i),i.setClinicId=i.setClinicId.bind(i),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),s(t,[{key:"getAppointmentTimeByDate",value:function(e){var t=this.props,i=t.dispatch,n=t.patId,s=t.visitId,o=(t.user_type,(0,u.default)(e).format(l.configConstants.DATE_FORMAT)),a={pat_id:n,visit_id:s,clinic_id:this.clinic_id,appointmentDate:o};i(p.nextVisitScheduleActions.getAppointmentTimeListing(a))}},{key:"setClinicId",value:function(e){this.clinic_id=e}},{key:"submitNextVisitSchedule",value:function(){var e=this.props,t=e.dispatch,i=e.patId,n=e.visitId;if(this.boundForm){var s=this.boundForm.getData();if(s){var o={pat_id:i,visit_id:n,timing_id:this.state.timing_id};t(p.nextVisitScheduleActions.nextVisitScheduleSubmitAction(c.utilityHelper.mergeMultipleObject([s,o])))}}}},{key:"componentWillMount",value:function(){var e=this.props,t=e.dispatch,i=e.patId,s=(e.visitId,this.state.formConfig.handlers),o=this.state.formConfig;this.setState({formConfig:n({},o,{handlers:n({},s,{booking_date_handle:this.getAppointmentTimeByDate,clinic_id_handle:this.setClinicId})})}),t(m.appointmentActions.getAppointmentReasons()),t(p.nextVisitScheduleActions.getAppointmentClinicListing()),t(p.nextVisitScheduleActions.getNextVisitSchedule(i))}},{key:"componentWillReceiveProps",value:function(e){if(e.isClinicFatched){var t=c.utilityHelper.getDataConvertToOptionType(e.visitAppointmentClinic,"label","value"),i=this.state.formConfig.data,s=this.state.formConfig;this.setState({formConfig:n({},s,{data:n({},i,{clinic_id_data:t})})})}if(e.isTimeListingFatched){var o=c.utilityHelper.visitAppointmentTimeListingOption(e.visitAppointmentTimeSlot),a=this.state.formConfig.data,r=this.state.formConfig;this.setState({formConfig:n({},r,{data:n({},a,{booking_time_data:o})}),timing_id:e.visitAppointmentTimeSlot[0].timing_id})}if(e.isFetchDone&&!e.isTimeListingFatched&&!e.isClinicFatched){var l=c.utilityHelper.getAppointmentReasons(e.appointmentReason),u=this.state.formConfig.data,d=this.state.formConfig;this.setState({formConfig:n({},d,{data:n({},u,{booking_reason_data:l})})})}var m=this.props.dispatch;(e.isInsertDone||e.isVisitScheduleFatched||e.errorMsg)&&setTimeout(function(){m(p.nextVisitScheduleActions.resetState())}.bind(this),2e3)}},{key:"handleBoundFormUpdate",value:function(e){this.boundForm=e}},{key:"componentDidUpdate",value:function(){var e=this.props.dispatch;this.props.isUserNotValid&&e(headerActions.logout())}},{key:"render",value:function(){return o.default.createElement("div",null,o.default.createElement(d.NextVisitSchedule,{submitNextVisitSchedule:this.submitNextVisitSchedule,formConfig:this.state.formConfig,handleBoundFormUpdate:this.handleBoundFormUpdate,errorMsg:this.props.errorMsg,successMsg:this.props.successMsg,isInsertDone:this.props.isInsertDone,visitAppointmentTimeSlot:this.props.visitAppointmentTimeSlot,user_type:this.props.user_type,submitted:this.props.submitted,nextVisitSchedule:this.props.patNextVisitSchedule,isVisitScheduleFatched:this.props.isVisitScheduleFatched}))}}]),t}();var g=(0,r.connect)(function(e){var t=e.nextVisitSchedule,i=t.successMsg,n=t.errorMsg,s=t.isInsertDone,o=t.visitAppointmentTimeSlot,a=t.sendingRequest,r=t.isTimeListingFatched,c=t.submitted,l=t.isClinicFatched,u=t.visitAppointmentClinic,d=t.patNextVisitSchedule,p=t.isVisitScheduleFatched,m=e.appointment,f=m.appointmentReason;return{successMsg:i,errorMsg:n,isInsertDone:s,visitAppointmentTimeSlot:o,sendingRequest:a,isTimeListingFatched:r,submitted:c,isClinicFatched:l,visitAppointmentClinic:u,isFetchDone:m.isFetchDone,appointmentReason:f,patNextVisitSchedule:d,isVisitScheduleFatched:p}})(h);t.NextVisitScheduleContainer=g},2677:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=i(9),o=(n=s)&&n.__esModule?n:{default:n};var a={fields:[{name:"clinic_id",title:"Clinic",value:"",type:"select",showOnForm:!0,validations:[{isRequired:!0,msg:"This field is required."}],cssClasses:{inputParentClass:"col-md-3"}},{name:"booking_date",title:"Appointment Date",value:null,type:"date",showOnForm:!0,format:i(8).configConstants.DATE_FORMAT,validations:[{isRequired:!0,msg:"This field is required."}],cssClasses:{inputParentClass:"col-md-3"}},{name:"booking_time",title:"Appointment Time",value:"",type:"select",showOnForm:!0,validations:[{isRequired:!0,msg:"This field is required."}],cssClasses:{inputParentClass:"col-md-3"}},{name:"booking_reason",title:"Booking Reason",value:"",type:"select",showOnForm:!0,validations:[{isRequired:!0,msg:"This field is required."}],cssClasses:{inputParentClass:"col-md-3"}}],data:{booking_time_data:[],clinic_id_data:[],booking_reason_data:[],booking_date:(0,o.default)()},handlers:{}};t.default=a},852:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appointmentActions=void 0;var n=i(8),s=i(301),o=i(871),a=i(10);i(24),t.appointmentActions={appointmentStore:function(e){return function(i){i({type:s.appointmentConstants.APT_ADD_REQUEST}),o.appointmentService.doAppointmentCreate(e).then(function(e){var o,r=e.data;if(r.code==n.configConstants.SUCCESS_CODE){var c={message:r.message,appointmentInsertData:r.result};i(function(e){return{type:s.appointmentConstants.APT_ADD_SUCCESS,result:e}}(c))}else if(r.code==n.configConstants.ERROR_CODE){var l=a.utilityHelper.getFirstErrorMessage(r.error);i(t(l))}else if(r.code==n.configConstants.EXCEPTION_CODE){var l=r.message;i(t(l))}else if(r.code==n.configConstants.UNAUTHENTICATE_CODE){var l=r.message;i((o=l,{type:n.configConstants.UNAUTHENTICATE,error:o}))}else i(t(e))}).catch(function(e){i(t(e))})};function t(e){return{type:s.appointmentConstants.APT_ADD_FAILURE,error:e}}},getAppointmentReasons:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(i){i({type:s.appointmentConstants.APT_REASON_REQUEST}),o.appointmentService.getAppointmentReasons(e).then(function(e){var o,r=e.data;if(r.code==n.configConstants.SUCCESS_CODE){var c={message:r.message,appointmentReason:r.result};i(function(e){return{type:s.appointmentConstants.APT_REASON_SUCCESS,result:e}}(c))}else if(r.code==n.configConstants.ERROR_CODE){var l=a.utilityHelper.getFirstErrorMessage(r.error);i(t(l))}else if(r.code==n.configConstants.EXCEPTION_CODE){var l=r.message;i(t(l))}else if(r.code==n.configConstants.UNAUTHENTICATE_CODE){var l=r.message;i((o=l,{type:n.configConstants.UNAUTHENTICATE,error:o}))}else i(t(e))}).catch(function(e){i(t(e))})};function t(e){return{type:s.appointmentConstants.APT_REASON_FAILURE,error:e}}},updateState:function(){return function(e){e({type:s.appointmentConstants.APT_UPDATE_STATE})}}}},871:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appointmentService=void 0;var n,s=i(15),o=(n=s)&&n.__esModule?n:{default:n},a=i(8),r=i(10);t.appointmentService={doAppointmentCreate:function(e){var t=r.utilityHelper.getLoginAccessToken();return(0,o.default)({method:"post",url:a.configConstants.API_BASE_PATH+"bookings/add",data:e,headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then(function(e){return e}).catch(function(e){return e})},getAppointmentReasons:function(e){var t=r.utilityHelper.getLoginAccessToken();return(0,o.default)({method:"post",url:a.configConstants.API_BASE_PATH+"appointment/reason/list",data:{user_id:e},headers:{Authorization:"Bearer "+t,"Content-Type":"application/json"}}).then(function(e){return e}).catch(function(e){return e})}}}}]);