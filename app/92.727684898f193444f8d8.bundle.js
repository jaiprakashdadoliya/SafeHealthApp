(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{1999:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PatientReports=void 0;var i=l(a(1)),r=l(a(9)),s=(a(80),a(8),a(10)),n=a(802),o=l(a(807));function l(t){return t&&t.__esModule?t:{default:t}}a(804);e.PatientReports=function(t){return i.default.createElement("div",{className:"col-md-12 mb-10"},i.default.createElement("div",{className:"row"},i.default.createElement("div",{className:"col-md-6 col-sm-12"},i.default.createElement("h4",null,"Patient Report")),i.default.createElement("div",{className:"col-md-6 col-sm-12 text-right"},i.default.createElement("ul",{className:"print_btn"},i.default.createElement("li",null," ",i.default.createElement("a",{href:"javascript:void(0)"},"Export"),i.default.createElement("ul",null,i.default.createElement("li",null,i.default.createElement("a",{href:"javascript:void(0)",onClick:t.handleReportExport.bind(null,"csv")},"CSV")),i.default.createElement("li",null,i.default.createElement("a",{href:"javascript:void(0)",onClick:t.handleReportExport.bind(null,"pdf")},"PDF")))))),i.default.createElement("div",{className:"col-md-12"},t.errorMsg&&!t.isInsertDone&&i.default.createElement(Alert,{bsStyle:"danger"},t.errorMsg),(t.isUpdateDone||t.isEditSuccess)&&t.successMsg&&i.default.createElement(Alert,{bsStyle:"success"},t.successMsg)),i.default.createElement("div",{className:"col-md-12 mb10 filter-form-fields rpl rpr"},i.default.createElement("form",{role:"form",onSubmit:function(t){t.preventDefault()}},i.default.createElement(n.FxForm,{config:t.PatientReportsFormConfig,ref:function(e){t.handlePatientReportsFormUpdate(e)}}))),i.default.createElement("div",{className:"clearfix mt20"}),i.default.createElement("div",{className:"col-md-12 mt20"},i.default.createElement("div",{className:"table-wrap"},i.default.createElement("div",{className:"table-search reports-table-search"},i.default.createElement("input",{value:t.filterAll,onChange:t.filteredPatientSearch,className:"table-search-input",placeholder:"Search"})),i.default.createElement("div",{className:"patientList"},i.default.createElement(o.default,{noDataText:"No record found !!",columns:[{Header:"Created Date",headerClassName:"grid-header",accessor:"created_at",filterMethod:function(t,e){return e[t.id].includes(t.value)},Cell:function(t){return i.default.createElement("div",null,i.default.createElement("a",{className:"content",href:"javascript:void(0)"},(0,r.default)(t.value).format("DD/MM/YYYY")))}},{Header:"Patient Name",headerClassName:"grid-header",accessor:"user_firstname",filterMethod:function(t,e){return e[t.id].includes(t.value)},Cell:function(t){return i.default.createElement("div",null,i.default.createElement("a",{className:"content",href:"javascript:void(0)"},t.value))}},{Header:"Patient Code",headerClassName:"grid-header",accessor:"pat_code",width:100,filterMethod:function(t,e){return e[t.id].includes(t.value)},Cell:function(t){return i.default.createElement("div",null,i.default.createElement("a",{className:"content",href:"javascript:void(0)"},t.value))}},{Header:"Mobile Number",headerClassName:"grid-header",accessor:"user_mobile",filterMethod:function(t,e){return e[t.id].includes(t.value)},Cell:function(t){return i.default.createElement("div",null,i.default.createElement("a",{className:"content",href:"javascript:void(0)"},t.value))}},{Header:"Email Address",headerClassName:"grid-header",accessor:"user_email",filterMethod:function(t,e){return e[t.id].includes(t.value)},Cell:function(t){return i.default.createElement("div",null,i.default.createElement("a",{className:"content",href:"javascript:void(0)"},t.value))}},{Header:"Gender",accessor:"user_gender",className:"dataCellClass",headerClassName:"grid-header",width:100,filterMethod:function(t,e){return e[t.id].includes(t.value)},Cell:function(t){return i.default.createElement("div",null,i.default.createElement("a",{className:"content",href:"javascript:void(0)"},s.utilityHelper.getGender(t.value)))}},{Header:"Group",accessor:"pat_group_name",headerClassName:"grid-header",width:150,filterMethod:function(t,e){return e[t.id].includes(t.value)},Cell:function(t){return i.default.createElement("div",null,i.default.createElement("a",{className:"content",href:"javascript:void(0)"},t.value))}}],data:t.filterPatientData.result,defaultPageSize:10,minRows:0,className:"table table-bordered responsive",defaultFilterMethod:function(t,e){return String(e[t.id])===t.value},filtered:t.filtered,Sorted:!0,pages:t.filterPatientData.pages,showPagination:!0,showPaginationTop:!0,showPaginationBottom:!1,pageSizeOptions:[10,20,50,100],manual:!0,onFetchData:function(e,a){t.getFilteredPatientList(e.page,e.pageSize,e.sorted,e.filtered)}}))))))}},2768:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(1999);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})});var r=a(2769);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})})},2769:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PatientReportsContainer=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},r=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),s=h(a(1)),n=a(36),o=(h(a(296)),h(a(9))),l=(a(66),a(1999)),d=a(8),c=a(10),p=h(a(2770)),u=a(54),f=a(2771);function h(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function e(t,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,a));return i.defaultState={PatientReportsFormConfig:p.default,pages:0,filtered:[],sorted:[],extraSearchFilter:{state_id:"",city_id:"",group_id:"",doc_ref_id:"",symptoms_id:"",diagnosis_id:"",from_date:"",to_date:"",export_type:""}},i.state=i.defaultState,i.boundPatientReportsForm=void 0,i.handlePatientReportsFormUpdate=i.handlePatientReportsFormUpdate.bind(i),i.isStateSet=!1,i.isCitySet=!1,i.stateLoad=!0,i.stateLoad=!0,i.patientGroupsLoad=!0,i.referralsLoad=!0,i.countryDataCall=!0,i.filterDataLoad=!0,i.isStateFirstOption=!1,i.isCityFirstOption=!1,i.getStateByCountry=i.getStateByCountry.bind(i),i.getReportByState=i.getReportByState.bind(i),i.getReportByCity=i.getReportByCity.bind(i),i.getReportByGroup=i.getReportByGroup.bind(i),i.getReportByReferredDoctor=i.getReportByReferredDoctor.bind(i),i.getReportBySymptomsComplaint=i.getReportBySymptomsComplaint.bind(i),i.getReportByDiagnosis=i.getReportByDiagnosis.bind(i),i.getReportByFromDate=i.getReportByFromDate.bind(i),i.getReportByToDate=i.getReportByToDate.bind(i),i.getFilteredPatientList=i.getFilteredPatientList.bind(i),i.filteredPatientSearch=i.filteredPatientSearch.bind(i),i.handleReportExport=i.handleReportExport.bind(i),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default.Component),r(e,[{key:"handlePatientReportsFormUpdate",value:function(t){this.boundPatientReportsForm=t}},{key:"componentWillMount",value:function(){var t=this.props,e=t.dispatch;t.patId;e(u.regionActions.getCountry()),e(u.newPatientActions.getReferralDoctor()),e(u.newPatientActions.getPatientGroups()),e(f.patientReportsActions.getReportsFilterData(["symptoms","disease"]));var a=this.state.PatientReportsFormConfig.handlers,r=this.state.PatientReportsFormConfig;this.setState({PatientReportsFormConfig:i({},r,{handlers:i({},a,{patient_state_handle:this.getReportByState,patient_city_handle:this.getReportByCity,patient_group_handle:this.getReportByGroup,patient_referred_by_handle:this.getReportByReferredDoctor,patient_complaint_handle:this.getReportBySymptomsComplaint,patient_diagnosis_handle:this.getReportByDiagnosis,patient_from_date_handle:this.getReportByFromDate,patient_to_date_handle:this.getReportByToDate})})})}},{key:"getStateByCountry",value:function(t){(0,this.props.dispatch)(u.regionActions.getStates(t))}},{key:"getReportByState",value:function(t){(0,this.props.dispatch)(u.regionActions.getCities(t));var e=this.state.extraSearchFilter;this.setState({extraSearchFilter:i({},e,{state_id:t,export_type:""})},function(){this.getFilteredPatientList(this.state.pages,10,this.state.sorted,this.state.filtered)})}},{key:"getReportByCity",value:function(t){this.props.dispatch;var e=this.state.extraSearchFilter;this.setState({extraSearchFilter:i({},e,{city_id:t,export_type:""})},function(){this.getFilteredPatientList(this.state.pages,10,this.state.sorted,this.state.filtered)})}},{key:"getReportByGroup",value:function(t){this.props.dispatch;var e=this.state.extraSearchFilter;this.setState({extraSearchFilter:i({},e,{group_id:t,export_type:""})},function(){this.getFilteredPatientList(this.state.pages,10,this.state.sorted,this.state.filtered)})}},{key:"getReportByReferredDoctor",value:function(t){this.props.dispatch;var e=this.state.extraSearchFilter;this.setState({extraSearchFilter:i({},e,{doc_ref_id:t,export_type:""})},function(){this.getFilteredPatientList(this.state.pages,10,this.state.sorted,this.state.filtered)})}},{key:"getReportBySymptomsComplaint",value:function(t){this.props.dispatch;var e=this.state.extraSearchFilter;this.setState({extraSearchFilter:i({},e,{symptoms_id:t,export_type:""})},function(){this.getFilteredPatientList(this.state.pages,10,this.state.sorted,this.state.filtered)})}},{key:"getReportByDiagnosis",value:function(t){this.props.dispatch;var e=this.state.extraSearchFilter;this.setState({extraSearchFilter:i({},e,{diagnosis_id:t,export_type:""})},function(){this.getFilteredPatientList(this.state.pages,10,this.state.sorted,this.state.filtered)})}},{key:"getReportByFromDate",value:function(t){var e=(0,o.default)(t).format(d.configConstants.DATE_FORMAT_DB),a=(this.props.dispatch,this.state.extraSearchFilter);this.setState({extraSearchFilter:i({},a,{from_date:e,export_type:""})},function(){this.getFilteredPatientList(this.state.pages,10,this.state.sorted,this.state.filtered)})}},{key:"getReportByToDate",value:function(t){var e=(0,o.default)(t).format(d.configConstants.DATE_FORMAT_DB),a=(this.props.dispatch,this.state.extraSearchFilter);if(this.setState({extraSearchFilter:i({},a,{to_date:e,export_type:""})},function(){this.getFilteredPatientList(this.state.pages,10,this.state.sorted,this.state.filtered)}),""==a.from_date){var r=this.state.PatientReportsFormConfig.fields;for(var s in r){"patient_from_date"==r[s].name&&(r[s].value=(0,o.default)(e).subtract(1,"months"),this.boundPatientReportsForm.setFieldData({patient_from_date:r[s].value}))}}}},{key:"handleReportExport",value:function(t){this.props.dispatch;var e=this.state.extraSearchFilter;this.setState({extraSearchFilter:i({},e,{export_type:t})},function(){this.getFilteredPatientList(this.state.pages,10,this.state.sorted,this.state.filtered)})}},{key:"getFilteredPatientList",value:function(t,e,a,i){var r=this.props.dispatch,s={};s.page=t,s.filtered=i,s.sorted=a,s.pageSize=e;var n;n=c.utilityHelper.mergeMultipleObject([s,this.state.extraSearchFilter]),r(f.patientReportsActions.getReportPatients(n))}},{key:"filteredPatientSearch",value:function(t){var e=t.target.value,a=[{id:"all",value:e}];this.setState({filterAll:e,filtered:a})}},{key:"componentWillReceiveProps",value:function(t){this.props.dispatch;if(t.country&&this.countryDataCall){var e,a=c.utilityHelper.getCountry(t.country,"country_id","country_name");this.state.PatientReportsFormConfig.data,this.state.PatientReportsFormConfig;""!=(e=a[0].hasOwnProperty("value")?a[0].value:"")&&(this.countryDataCall=!1,this.getStateByCountry(e))}if(void 0!=t.states&&this.stateLoad){if(t.states.length>0&&""!=t.states[0].id){t.states.unshift({id:"",name:"-- Select --"})}var r=c.utilityHelper.getDataConvertToOptionType(t.states,"name","id"),s=this.state.PatientReportsFormConfig.data,n=this.state.PatientReportsFormConfig;this.setState({PatientReportsFormConfig:i({},n,{data:i({},s,{patient_state_data:r})})},function(){this.isStateSet=!0,this.stateLoad=!1})}if(void 0!=t.cities&&this.isStateSet){if(this.citiesLoad=!1,t.cities.length>0&&""!=t.cities[0].id){t.cities.unshift({id:"",name:"-- Select --"})}var o=c.utilityHelper.getDataConvertToOptionType(t.cities,"name","id"),l=this.state.PatientReportsFormConfig.data,d=this.state.PatientReportsFormConfig;this.setState({PatientReportsFormConfig:i({},d,{data:i({},l,{patient_city_data:o})})},function(){this.stateLoad=!0,this.isStateSet=!1})}if(t.patientGroups&&t.isPatientGroupsFetchDone&&this.patientGroupsLoad){if(this.patientGroupsLoad=!1,t.patientGroups.length>0&&""!=t.patientGroups[0].pat_group_id){t.patientGroups.unshift({pat_group_id:"",pat_group_name:"-- Select --"})}var p=c.utilityHelper.getDataConvertToOptionType(t.patientGroups,"pat_group_name","pat_group_id"),u=this.state.PatientReportsFormConfig.data,f=this.state.PatientReportsFormConfig;this.setState({PatientReportsFormConfig:i({},f,{data:i({},u,{patient_group_data:p})})})}if(t.referralDoctor&&t.isReferralDoctorFetchDone&&this.referralsLoad){if(this.referralsLoad=!1,t.referralDoctor.length>0&&""!=t.referralDoctor[0].doc_ref_id){t.referralDoctor.unshift({doc_ref_id:"",doc_ref_name:"-- Select --"})}var h=c.utilityHelper.getDataConvertToOptionType(t.referralDoctor,"doc_ref_name","doc_ref_id"),m=this.state.PatientReportsFormConfig,_=m.data,g=m.fields,v=this.state.PatientReportsFormConfig;for(var y in this.setState({PatientReportsFormConfig:i({},v,{data:i({},_,{patient_referred_by_data:h})})}),g)"patient_from_date"==g[y].name&&this.boundPatientReportsForm.setFieldData({patient_from_date:void 0})}if(t.filterData&&t.isFilterDataFetched&&this.filterDataLoad){if(this.filterDataLoad=!1,t.filterData.symptoms.length>0&&""!=t.filterData.symptoms[0].symptom_id){t.filterData.symptoms.unshift({symptom_id:"",symptom_name:"-- Select --"})}if(t.filterData.disease.length>0&&""!=t.filterData.disease[0].disease_id){t.filterData.disease.unshift({disease_id:"",disease_name:"-- Select --"})}var C=c.utilityHelper.getDataConvertToOptionType(t.filterData.symptoms,"symptom_name","symptom_id"),R=c.utilityHelper.getDataConvertToOptionType(t.filterData.disease,"disease_name","disease_id"),P=this.state.PatientReportsFormConfig.data,S=this.state.PatientReportsFormConfig;this.setState({PatientReportsFormConfig:i({},S,{data:i({},P,{patient_complaint_data:C,patient_diagnosis_data:R})})})}}},{key:"render",value:function(){return s.default.createElement(l.PatientReports,{handlePatientReportsFormUpdate:this.handlePatientReportsFormUpdate,PatientReportsFormConfig:this.state.PatientReportsFormConfig,filterPatientData:this.props.filterPatientData,getFilteredPatientList:this.getFilteredPatientList,filterAll:this.state.filterAll,filtered:this.state.filtered,filteredPatientSearch:this.filteredPatientSearch,handleReportExport:this.handleReportExport})}}]),e}();var _=(0,n.connect)(function(t){var e=t.patientReports,a=e.filterData,i=e.isFilterDataFetched,r=e.filterPatientData,s=e.isFilterPatientDataFetched,n=t.newPatient,o=n.referralDoctor,l=n.isReferralDoctorFetchDone,d=n.isPatientGroupsFetchDone,c=n.patientGroups,p=t.region;return{filterData:a,isFilterDataFetched:i,filterPatientData:r,isFilterPatientDataFetched:s,country:p.country,states:p.states,cities:p.cities,referralDoctor:o,isReferralDoctorFetchDone:l,isPatientGroupsFetchDone:d,patientGroups:c}})(m);e.PatientReportsContainer=_},2770:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r=a(9),s=(i=r)&&i.__esModule?i:{default:i};var n={fields:[{name:"patient_state",title:"State",value:"",type:"select",showOnForm:!0,validations:[{isRequired:!1,msg:"This field is required."}],cssClasses:{inputParentClass:"col-md-3",labelClass:"control-label",inputContainerClass:""}},{name:"patient_city",title:"City",value:"",type:"select",showOnForm:!0,validations:[{isRequired:!1,msg:"This field is required."}],cssClasses:{inputParentClass:"col-md-3",labelClass:"control-label",inputContainerClass:""}},{name:"patient_group",title:"Group",value:"",type:"select",showOnForm:!0,validations:[{isRequired:!1,msg:"This field is required."}],cssClasses:{inputParentClass:"col-md-3",labelClass:"control-label",inputContainerClass:""}},{name:"patient_referred_by",title:"Referred By",value:"",type:"select",showOnForm:!0,validations:[{isRequired:!1,msg:"This field is required."}],cssClasses:{inputParentClass:"col-md-3",labelClass:"control-label",inputContainerClass:""}},{name:"patient_complaint",title:"Complaint",value:"",type:"select",showOnForm:!0,validations:[{isRequired:!1,msg:"This field is required."}],cssClasses:{inputParentClass:"col-md-3",labelClass:"control-label",inputContainerClass:""}},{name:"patient_diagnosis",title:"Diagnosis",value:"",type:"select",showOnForm:!0,validations:[{isRequired:!1,msg:"This field is required."}],cssClasses:{inputParentClass:"col-md-3",labelClass:"control-label",inputContainerClass:""}},{name:"patient_from_date",title:"From Date",value:"",type:"date",showOnForm:!0,format:"DD/MM/YYYY",validations:[{isRequired:!1,msg:"Required."}],cssClasses:{inputParentClass:"col-md-3",labelClass:"control-label",inputContainerClass:""}},{name:"patient_to_date",title:"To Date",value:"",type:"date",showOnForm:!0,format:"DD/MM/YYYY",validations:[{isRequired:!1,msg:"Required."}],cssClasses:{inputParentClass:"col-md-3",labelClass:"control-label",inputContainerClass:""}}],data:{patient_state_data:[],patient_city_data:[],patient_group_data:[],patient_referred_by_data:[],patient_complaint_data:[],patient_diagnosis_data:[],patient_from_date:(0,s.default)(),patient_to_date:(0,s.default)()},handlers:{}};e.default=n},2771:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.patientReportsActions=void 0;var i=a(8),r=a(347),s=a(2772);a(10),e.patientReportsActions={getReportsFilterData:function(t){return function(a){s.patientReportsService.getReportsFilterDataService({"get-data":t}).then(function(t){var s,n,o=t.data;o.code==i.configConstants.SUCCESS_CODE?a((n=o.result,{type:r.patientReportsConstants.PATIENT_REPORTS_GET_FILTER_DATA_SUCCESS,reportsData:n})):o.code==i.configConstants.ERROR_CODE?a(e(o.message)):o.code==i.configConstants.EXCEPTION_CODE?a(e(o.message)):o.code==i.configConstants.UNAUTHENTICATE_CODE?a((s=o.message,{type:i.configConstants.UNAUTHENTICATE,error:s})):a(e(t))}).catch(function(t){a(e(t.message))})};function e(t){return{type:r.patientReportsConstants.PATIENT_REPORTS_GET_FILTER_DATA_FAILURE,errorMsg:t}}},getReportPatients:function(t){return function(a){s.patientReportsService.getReportPatientsService(t).then(function(t){var s,n,o=t.data;o.code==i.configConstants.SUCCESS_CODE?a((n=o.result,{type:r.patientReportsConstants.REPORTS_GET_FILTER_PATIENTS_DATA_SUCCESS,patientsData:n})):o.code==i.configConstants.ERROR_CODE?a(e(o.message)):o.code==i.configConstants.EXCEPTION_CODE?a(e(o.message)):o.code==i.configConstants.UNAUTHENTICATE_CODE?a((s=o.message,{type:i.configConstants.UNAUTHENTICATE,error:s})):a(e(t))}).catch(function(t){a(e(t.message))})};function e(t){return{type:r.patientReportsConstants.REPORTS_GET_FILTER_PATIENTS_DATA_FAILURE,errorMsg:t}}}}},2772:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.patientReportsService=void 0;var i,r=a(15),s=(i=r)&&i.__esModule?i:{default:i},n=a(8),o=a(10);e.patientReportsService={getReportsFilterDataService:function(t){return(0,s.default)({method:"POST",url:n.configConstants.API_BASE_PATH+"doctor/reports/filter-data",headers:o.headerHelper.getHeaderWithAuthorization(),data:o.headerHelper.appendUserDataInJson(t)}).then(function(t){return t}).catch(function(t){var e=o.utilityHelper.catchServiceErrorHandel(t);return e})},getReportPatientsService:function(t){var e=n.configConstants.EXPORT_PATIENTS_EXTENSION_TYPE_CSV;void 0!=t.export_type&&"pdf"==t.export_type&&(e=n.configConstants.EXPORT_PATIENTS_EXTENSION_TYPE_PDF);return(0,s.default)({method:"POST",url:n.configConstants.API_BASE_PATH+"doctor/reports/get-patients",headers:o.headerHelper.getHeaderWithAuthorization(),data:o.headerHelper.appendUserDataInJson(t)}).then(function(a){if(void 0!=a.data.code)return a;if(void 0!=t.export_type&&"csv"==t.export_type){var i=window.URL.createObjectURL(new Blob([a.data])),r=document.createElement("a");r.href=i,r.setAttribute("download",n.configConstants.EXPORT_PATIENTS+o.utilityHelper.getFormattedTime()+e),document.body.appendChild(r),r.click()}else void 0!=t.export_type&&"pdf"==t.export_type&&window.open(a.data,"_blank")}).catch(function(t){var e=o.utilityHelper.catchServiceErrorHandel(t);return e})}}},804:function(t,e,a){}}]);